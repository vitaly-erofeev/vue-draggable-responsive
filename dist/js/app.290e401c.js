(function(t){function i(i){for(var o,c,l=i[0],a=i[1],r=i[2],d=0,u=[];d<l.length;d++)c=l[d],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&u.push(s[c][0]),s[c]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o]);h&&h(i);while(u.length)u.shift()();return n.push.apply(n,r||[]),e()}function e(){for(var t,i=0;i<n.length;i++){for(var e=n[i],o=!0,l=1;l<e.length;l++){var a=e[l];0!==s[a]&&(o=!1)}o&&(n.splice(i--,1),t=c(c.s=e[0]))}return t}var o={},s={app:0},n=[];function c(i){if(o[i])return o[i].exports;var e=o[i]={i:i,l:!1,exports:{}};return t[i].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=o,c.d=function(t,i,e){c.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,i){if(1&i&&(t=c(t)),8&i)return t;if(4&i&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var o in t)c.d(e,o,function(i){return t[i]}.bind(null,o));return e},c.n=function(t){var i=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(i,"a",i),i},c.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=i,l=l.slice();for(var r=0;r<l.length;r++)i(l[r]);var h=a;n.push([0,"chunk-vendors"]),e()})({0:function(t,i,e){t.exports=e("cd49")},"034f":function(t,i,e){"use strict";e("85ec")},"0da9":function(t,i,e){"use strict";e("34be")},"1fc4":function(t,i,e){"use strict";e("d993")},"34be":function(t,i,e){},"4a6a":function(t,i,e){"use strict";e("68b2")},"633f":function(t,i,e){},"68b2":function(t,i,e){},"85ec":function(t,i,e){},ad8b:function(t,i,e){"use strict";e("633f")},cd49:function(t,i,e){"use strict";e.r(i);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o,s,n,c=e("2b0e"),l=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{height:"100%"},attrs:{id:"app"}},[e("div",{staticStyle:{width:"20%",display:"inline-block",float:"left",height:"100%",overflow:"auto"}},[e("button",{on:{click:function(i){return t.addContainer(0)}}},[t._v("add")]),e("button",{on:{click:function(i){return t.addContainer(1,i)}}},[t._v("addT")]),e("button",{on:{click:function(i){return t.addContainer(1,i,!0)}}},[t._v("addStretched")]),e("button",{on:{click:t.addChildren}},[t._v("addChild")]),e("button",{on:{click:t.load}},[t._v("load")]),e("button",{on:{click:function(i){return t.addSticky(i)}}},[t._v("addSticky")]),e("button",{on:{click:t.get}},[t._v("get")]),e("button",{on:{click:function(i){return t.addWithTabs(1,i)}}},[t._v("addWithTabs")]),e("button",{on:{click:t.addTab}},[t._v("addTab")]),e("button",{on:{click:t.removeTab}},[t._v("removeTab")]),e("button",{on:{click:function(i){t.preview=!t.preview}}},[t._v("preview: "+t._s(t.preview))]),e("button",{on:{click:t.remove}},[t._v("remove active")]),e("button",{on:{click:t.clearActive}},[t._v("clear active")]),e("button",{on:{click:function(i){return t.addReplication(1,i)}}},[t._v("add replication")]),e("button",{on:{click:t.toggleHide}},[t._v("toggle hide")]),e("button",{on:{click:t.switchWidth}},[t._v("switch width")]),e("button",{on:{click:t.switchSticky}},[t._v("sticky")]),e("button",{on:{click:function(i){return t.addContainerPercent(1,i)}}},[t._v("percent container")]),e("button",{on:{click:function(i){return t.addContainerPixel(1,i)}}},[t._v("pixel container")]),e("button",{on:{click:function(i){return t.addMinMax()}}},[t._v("add min_max")]),e("button",{on:{click:function(i){return t.addHorizontalCenter()}}},[t._v("add hor center")]),e("button",{on:{click:function(i){return t.addVerticalCenter()}}},[t._v("add ver center")]),e("button",{on:{click:function(i){t.showHidden=!t.showHidden}}},[t._v("toggle show hidden: "+t._s(t.showHidden))]),e("select",{directives:[{name:"model",rawName:"v-model",value:(t.activeBlock||{}).sticky,expression:"(activeBlock || {}).sticky"}],on:{change:function(i){var e=Array.prototype.filter.call(i.target.options,(function(t){return t.selected})).map((function(t){var i="_value"in t?t._value:t.value;return i}));t.$set(t.activeBlock||{},"sticky",i.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"tr"}},[t._v("Top-Right")]),e("option",{attrs:{value:"tl"}},[t._v("Top-Left")]),e("option",{attrs:{value:"br"}},[t._v("Bottom-Right")]),e("option",{attrs:{value:"bl"}},[t._v("Bottom-Left")])]),e("pre",[t._v(t._s(t.activeBlock))])]),e("vue-draggable-responsive",{directives:[{name:"show",rawName:"v-show",value:!t.preview,expression:"!preview"}],ref:"designer",staticStyle:{height:"500px",width:"1059px",display:"inline-block"},attrs:{step:1,"show-hidden":t.showHidden},on:{"start-drag":t.onStartDrag,contextmenu:t.oncontext},scopedSlots:t._u([{key:"content",fn:function(i){var e=i.block;return[t._v(" "+t._s(e.guid)+" ")]}}])}),t.preview?e("vue-draggable-responsive-previewer",{ref:"previewer",staticStyle:{height:"500px",width:"1059px",display:"inline-block"},attrs:{"replication-callback":t.cl},scopedSlots:t._u([{key:"content",fn:function(i){var e=i.block;return[t._v(" "+t._s(e.guid)+" ")]}}],null,!1,1506779330)}):t._e()],1)},a=[],r=(e("4de4"),e("a434"),e("d3b7"),e("96cf"),e("1da1")),h=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},[e("svg",{attrs:{id:"svg"}},t._l(t.stickyLines,(function(t,i){return e("line",{key:i,staticClass:"line",attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})})),0),t._l(t._blocks,(function(i){return e("block",{key:i.guid,ref:i.guid,refInFor:!0,attrs:{block:i,step:t.step,"show-hidden":t.showHidden,"tab-settings-service":t.tabSettingsService},on:{"start-drag":function(i){return t.$emit("start-drag",i)},"stop-drag":function(i){return t.$emit("stop-drag",i)},dragging:function(i){return t.$emit("dragging",i)},contextmenu:function(i){return t.$emit("contextmenu",i)},click:function(i){return t.$emit("click",i)}},scopedSlots:t._u([t._l(t.$scopedSlots,(function(i,e){return{key:e,fn:function(i){return[t._t(e,null,null,i)]}}}))],null,!0)})}))],2)},d=[],u=(e("4160"),e("a9e3"),e("159b"),function(){var t,i,e,o=this,s=o.$createElement,n=o._self._c||s;return n("div",{directives:[{name:"show",rawName:"v-show",value:!o.block.isHidden||o.showHidden,expression:"!block.isHidden || showHidden"}],ref:"draggableContainer",class:(t={block:!0,highlight:o.isResizing||o.isDragging,active:o.block.isActive,hidden:o.block.isHidden,active_parent:o.block.isActiveAsParent},t[o.block.className]=!!o.block.className,t),style:o.positionStyle,on:{mousedown:function(t){return t.stopPropagation(),o.dragStart(t)},contextmenu:function(t){return t.stopPropagation(),o.$emit("contextmenu",{block:o.block,event:t})}}},[o.isTabsContainer?n("div",{ref:"tabsContainer",class:{tabs_container:!0,custom_scrollbar:!0,position_top:"top"===o.block.tabs.position,position_right:"right"===o.block.tabs.position,position_bottom:"bottom"===o.block.tabs.position,position_left:"left"===o.block.tabs.position},style:o.block.tabs.containerStyle},[n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:o.isShowArrows,expression:"isShowArrows"}],staticClass:"tabs_button",class:(i={},i[o.block.tabs.tabArrowsClass]=!0,i),attrs:{icon:"chevron-left"},on:{click:o.scrollPrevTab}}),n("div",{ref:"tabsScroll",staticClass:"tabs_onScroll",class:{tabs_padding:o.isShowArrows,direction:o.directionTabs}},o._l(o.visibleTabs,(function(t){var i;return n("div",{key:t.guid,class:(i={tab:!0,active:t.guid===o.activeTabGuid},i[o.block.tabs.class]=!0,i["required_tab"]=o.block.tabs.requiredTabs&&o.block.tabs.requiredTabs.includes(t.guid),i["positionTab"]=t.data&&t.data.isChild,i),style:o.blockTabStyle+o.getBlockTabStyle(t),on:{click:function(i){return o.onTabClick(t.guid)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.data&&t.data.isChild,expression:"tab.data && tab.data.isChild"}],on:{click:function(i){return o.showChildTabs(t.guid)}}},[n("i",{staticClass:"plus",class:{"el-icon-arrow-right":!t.data.isExpanded,"el-icon-arrow-down":t.data.isExpanded}})]),n("span",{staticClass:"label"},[o._v(o._s(t.name))])])})),0),n("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:o.isShowArrows,expression:"isShowArrows"}],staticClass:"tabs_button tabs_button_next",class:(e={},e[o.block.tabs.tabArrowsClass]=!0,e),attrs:{icon:"chevron-right"},on:{click:o.scrollNextTab}})],1):o._e(),n("div",{staticClass:"block_info"},[o._t("help_text",null,{block:o.block})],2),o._t("info",[n("div",{directives:[{name:"show",rawName:"v-show",value:o.isResizing,expression:"isResizing"}],staticClass:"block_info"},[o._v(" "+o._s(o.block.width)+o._s(o.block.sizeTypes.width)+" x "+o._s(o.block.height)+o._s(o.block.sizeTypes.height)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.isDragging&&["tl","bl"].includes(o.block.sticky),expression:"isDragging && ['tl', 'bl'].includes(block.sticky)"}],staticClass:"position_line left",style:"left: calc(-"+o.currentPosition.left+"px - 1px);width:calc("+o.currentPosition.left+"px - 1px)"},[n("span",[o._v(o._s(o.block.left)+o._s(o.block.sizeTypes.left))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.isDragging&&["tl","tr"].includes(o.block.sticky),expression:"isDragging && ['tl', 'tr'].includes(block.sticky)"}],staticClass:"position_line top",style:"top: -"+o.currentPosition.top+"px;height:"+o.currentPosition.top+"px"},[n("span",[o._v(o._s(o.block.top)+o._s(o.block.sizeTypes.top))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.isDragging&&["br","bl"].includes(o.block.sticky),expression:"isDragging && ['br', 'bl'].includes(block.sticky)"}],staticClass:"position_line bottom",style:"bottom: -"+o.currentPosition.bottom+"px;height:"+o.currentPosition.bottom+"px"},[n("span",[o._v(o._s(o.block.bottom)+o._s(o.block.sizeTypes.bottom))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.isDragging&&["tr","br"].includes(o.block.sticky),expression:"isDragging && ['tr', 'br'].includes(block.sticky)"}],staticClass:"position_line right",style:"right: -"+o.currentPosition.right+"px;width:"+o.currentPosition.right+"px"},[n("span",[o._v(o._s(o.block.right)+o._s(o.block.sizeTypes.right))])])],{block:o.block,isResizing:o.isResizing,isDragging:o.isDragging}),n("div",{staticClass:"content custom_scrollbar",style:o.blockContentStyle,on:{mouseover:function(t){o.block.isHover=!0},mouseleave:function(t){o.block.isHover=!1},click:function(t){return t.stopPropagation(),o.$emit("click",{block:t.block||o.block,event:t.event||t})}}},[o.isTabsContainer?o._e():o._t("content",null,{block:o.block}),o.block.isEditing||o.isTabsContainer?o._e():n("svg",{attrs:{id:"svg"}},o._l(o.stickyLines,(function(t,i){return n("line",{key:i,staticClass:"line",attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})})),0),o._l(o.children,(function(t){return n("block",{directives:[{name:"show",rawName:"v-show",value:o.isShowChildren&&t.parentTabGuid===o.activeTabGuid,expression:"isShowChildren && _block.parentTabGuid === activeTabGuid"}],key:t.guid,ref:t.guid,refInFor:!0,attrs:{block:t,"tab-settings-service":o.tabSettingsService,step:o.step,"show-hidden":o.showHidden},on:{"start-drag":function(t){return o.$emit("start-drag",t)},"stop-drag":function(t){return o.$emit("stop-drag",t)},dragging:function(t){return o.$emit("dragging",t)},contextmenu:function(t){return o.$emit("contextmenu",t)},click:function(i){return o.$emit("click",{block:i.block||t,event:i.event||i})}},scopedSlots:o._u([o._l(o.$scopedSlots,(function(t,i){return{key:i,fn:function(t){return[o._t(i,null,null,t)]}}}))],null,!0)})}))],2),n("font-awesome-icon",{class:"resize-handler "+o.block.sticky,attrs:{icon:"angle-down"},on:{mousedown:function(t){return t.stopPropagation(),o.resizeStart(t)}}})],2)}),b=[],v=(e("99af"),e("7db0"),e("c740"),e("caad"),e("d81d"),e("13d5"),e("b0c0"),e("2532"),e("ade3")),f=e("d4ec"),k=e("bee2");(function(t){t["TR"]="tr",t["TL"]="tl",t["BL"]="bl",t["BR"]="br"})(o||(o={})),function(t){t["PERCENT"]="%",t["PIXEL"]="px"}(s||(s={})),function(t){t["TOP"]="top",t["RIGHT"]="right",t["BOTTOM"]="bottom",t["LEFT"]="left"}(n||(n={}));var g,p,y,T,m,S,w,x=function(){function t(i){var e=i.children,c=void 0===e?[]:e,l=i.width,a=void 0===l?0:l,r=i.height,h=void 0===r?0:r,d=i.top,u=void 0===d?0:d,b=i.right,v=void 0===b?0:b,k=i.bottom,g=void 0===k?0:k,p=i.left,y=void 0===p?0:p,T=i.sticky,m=void 0===T?o.TL:T,S=i.sizeTypes,w=void 0===S?{width:s.PERCENT,height:s.PERCENT,top:s.PERCENT,right:s.PERCENT,bottom:s.PERCENT,left:s.PERCENT}:S,x=i.className,C=i.guid,B=void 0===C?"guid":C,E=i.alias,_=i.parentGuid,$=i.isStretched,O=i.isScrollHover,G=i.style,R=i.interactive,P=i.tabs,z=i.parentTabGuid,H=i.widthCalc,L=i.heightCalc,A=i.stickyTo,j=i.replication,N=i.pagination,I=i.isHover,W=void 0!==I&&I,M=i.isHidden,D=void 0!==M&&M,X=i.isHighlight,F=void 0!==X&&X,Y=i.minMax,q=i.onCenter,V=i.properties,J=void 0===V?{}:V;Object(f["a"])(this,t),this.isStretched=!1,this.isActive=!1,this.isActiveAsParent=!1,this.isScrollHover=!1,this.tabs={use:!1,list:[],position:n.TOP},this.isHover=!1,this.isHidden=!1,this.isHighlight=!1,this.properties={},this.widthCalc=H,this.heightCalc=L,this.stickyTo=A,this.isHover=W,this.isHidden=D,this.isHighlight=F,this.minMax=Y,this.onCenter=q;var K=t.getPreparedSizes({top:u,right:v,bottom:g,left:y,sticky:m}),U=K._top,Q=K._right,Z=K._bottom,tt=K._left;this.className=x,this.top=U,this.right=Q,this.bottom=Z,this.left=tt,this.sticky=m,this.sizeTypes=w,this.children=c,this.width=a,this.height=h,this.guid=B,this.alias=E,this.parentGuid=_,this.isStretched=$,this.isScrollHover=O,this.style=G,this.interactive=R,this.tabs=P,this.parentTabGuid=z,this.isEditing=!1,this.replication=j,this.pagination=N,this.properties=J,this.prepareSizesTypes()}return Object(k["a"])(t,[{key:"prepareSizesTypes",value:function(){var t=this,i=["top","left","right","bottom","height","width"];i.forEach((function(i){t.sizeTypes[i]||(t.sizeTypes[i]=s.PERCENT)}))}}],[{key:"getPreparedSizes",value:function(t){var i,e,s,n,c=t.top,l=t.right,a=t.bottom,r=t.left,h=t.sticky;return i=c,n=r,s=a,e=l,h===o.TL&&(i=c<0?0:c,n=r<0?0:r),{_top:i,_right:e,_bottom:s,_left:n}}}]),t}(),C=function(){function t(){Object(f["a"])(this,t),this.x=0,this.y=0,this.width=0,this.height=0,this.left=0,this.right=0,this.top=0,this.bottom=0}return Object(k["a"])(t,null,[{key:"fromDocRect",value:function(t){var i=t.top,e=t.right,o=t.bottom,s=t.left,n=t.width,c=t.height,l=t.x,a=t.y;return{top:i,right:e,bottom:o,left:s,width:n,height:c,x:l,y:a}}}]),t}();(function(t){t[t["X"]=0]="X",t[t["Y"]=1]="Y",t[t["W"]=2]="W",t[t["H"]=3]="H"})(g||(g={}));var B,E=(p={},Object(v["a"])(p,g.W,{client:"clientX",movement:"movementX",offset:"width",size:"width",inverse:!1}),Object(v["a"])(p,g.H,{client:"clientY",movement:"movementY",offset:"height",size:"height",inverse:!1}),Object(v["a"])(p,g.Y,{client:"clientY",movement:"movementY",size:"height",offset:"top",inverse:!1}),Object(v["a"])(p,g.X,{client:"clientX",movement:"movementX",size:"width",offset:"left",inverse:!1}),p),_=(w={},Object(v["a"])(w,g.X,(y={},Object(v["a"])(y,o.TR,{offset:"right",inverse:!0}),Object(v["a"])(y,o.TL,{offset:"left",inverse:!1}),Object(v["a"])(y,o.BL,{offset:"left",inverse:!1}),Object(v["a"])(y,o.BR,{offset:"right",inverse:!0}),y)),Object(v["a"])(w,g.Y,(T={},Object(v["a"])(T,o.TR,{offset:"top",inverse:!1}),Object(v["a"])(T,o.TL,{offset:"top",inverse:!1}),Object(v["a"])(T,o.BL,{offset:"bottom",inverse:!0}),Object(v["a"])(T,o.BR,{offset:"bottom",inverse:!0}),T)),Object(v["a"])(w,g.H,(m={},Object(v["a"])(m,o.BL,{inverse:!0}),Object(v["a"])(m,o.BR,{inverse:!0}),m)),Object(v["a"])(w,g.W,(S={},Object(v["a"])(S,o.TR,{inverse:!0}),Object(v["a"])(S,o.BR,{inverse:!0}),S)),w),$=function(){function t(){Object(f["a"])(this,t)}return Object(k["a"])(t,null,[{key:"build",value:function(t,i){var e=(_[t]||{})[i]||null;return e?Object.assign({},E[t],e):E[t]}}]),t}();(function(t){t["TOP"]="top",t["RIGHT"]="right",t["BOTTOM"]="bottom",t["LEFT"]="left"})(B||(B={}));var O=function(){function t(i,e,o){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;Object(f["a"])(this,t),this.clientX=0,this.clientY=0,this.movementX=0,this.movementY=0,this.type="drag",this.blockElementRect=new C,this.repository=e,this.block=i,this.step=s,this.blockElement=o,this.parentElement=this.blockElement.parentElement}return Object(k["a"])(t,[{key:"startDrag",value:function(t,i){var e,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((this.blockElementRect=this.getBlockElementRect(),this.clientX=t.clientX,this.clientY=t.clientY,this.type=i,"resize"===this.type&&(this.block.widthCalc&&this.block.widthCalc.type&&this.block.widthCalc.value&&("-"===this.block.widthCalc.type?this.block.sticky===o.TL||this.block.sticky===o.BL?this.clientX=this.clientX-this.block.widthCalc.value:this.clientX=this.clientX+this.block.widthCalc.value:this.block.sticky===o.TL||this.block.sticky===o.BL?this.clientX=this.clientX+this.block.widthCalc.value:this.clientX=this.clientX-this.block.widthCalc.value),this.block.heightCalc&&this.block.heightCalc.type&&this.block.heightCalc.value&&("-"===this.block.heightCalc.type?this.block.sticky===o.TL||this.block.sticky===o.TR?this.clientY=this.clientY-this.block.heightCalc.value:this.clientY=this.clientY+this.block.heightCalc.value:this.block.sticky===o.TL||this.block.sticky===o.TR?this.clientY=this.clientY+this.block.heightCalc.value:this.clientY=this.clientY-this.block.heightCalc.value)),s&&(this.clientX=this.blockElementRect.x+15,this.clientY=this.blockElementRect.y+15),"drag"===this.type&&s)&&(null!==(e=this.block.stickyTo)&&void 0!==e&&e.guid)){var n,c,l,a=this.repository.getRefByGuid(null===(n=this.block.stickyTo)||void 0===n?void 0:n.guid);(null===(c=this.block.stickyTo)||void 0===c?void 0:c.type)===B.TOP?this.clientY+=a.$el.offsetTop+a.$el.offsetHeight:(null===(l=this.block.stickyTo)||void 0===l?void 0:l.type)===B.LEFT&&(this.clientX+=a.$el.offsetLeft+a.$el.offsetWidth)}}},{key:"getBlockElementRect",value:function(){var t=C.fromDocRect(this.blockElement.getBoundingClientRect());if(!this.parentElement)return t;var i=this.parentElement.getBoundingClientRect();return t.left-=i.left,t.top-=i.top,t.left+=this.parentElement.scrollLeft,t.top+=this.parentElement.scrollTop,t.right=i.width-(t.left+t.width),t.bottom=i.height-(t.top+t.height),t}},{key:"change",value:function(t){this.movementX=this.clientX-t.clientX,this.movementY=this.clientY-t.clientY,"drag"===this.type?(this.setYPosition(t),this.setXPosition(t)):"resize"===this.type&&(this.setWidth(t),this.setHeight(t))}},{key:"setWidth",value:function(t){switch(this.block.sizeTypes.width){case s.PIXEL:this.setAbsolutePosition(g.W,t);break;case s.PERCENT:this.setRelativePosition(g.W);break}}},{key:"setHeight",value:function(t){switch(this.block.sizeTypes.height){case s.PIXEL:this.setAbsolutePosition(g.H,t);break;case s.PERCENT:this.setRelativePosition(g.H);break}}},{key:"setAbsolutePosition",value:function(t,i){var e,o=$.build(t,this.block.sticky);e=o.inverse?this.block[o.offset]+this[o.movement]:this.block[o.offset]-this[o.movement],e<0||(this[o.client]=i[o.client],this.repository.change(this.block.guid,o.offset,e),this.block[o.offset]=e)}},{key:"setYPosition",value:function(t){var i;if(null===(i=this.block.onCenter)||void 0===i||!i.vertical){var e=$.build(g.Y,this.block.sticky);switch(this.block.sizeTypes[e.offset]){case s.PIXEL:this.setAbsolutePosition(g.Y,t);break;case s.PERCENT:this.setRelativePosition(g.Y);break}}}},{key:"setXPosition",value:function(t){var i;if(null===(i=this.block.onCenter)||void 0===i||!i.horizontal){var e=$.build(g.X,this.block.sticky);switch(this.block.sizeTypes[e.offset]){case s.PIXEL:this.setAbsolutePosition(g.X,t);break;case s.PERCENT:this.setRelativePosition(g.X);break}}}},{key:"setRelativePosition",value:function(t){var i,e=$.build(t,this.block.sticky);if(this.parentElement&&!(Math.abs(this[e.movement])<2)){var o,s=this.parentElement.getBoundingClientRect();if(o=e.inverse?Math.floor(this.blockElementRect[e.offset])+this[e.movement]:Math.floor(this.blockElementRect[e.offset])-this[e.movement],null!==(i=this.block.stickyTo)&&void 0!==i&&i.guid&&(t===g.Y||t===g.X)){var n,c,l,a=this.repository.getRefByGuid(null===(n=this.block.stickyTo)||void 0===n?void 0:n.guid);(null===(c=this.block.stickyTo)||void 0===c?void 0:c.type)===B.TOP&&t===g.Y?o-=a.$el.offsetTop+a.$el.offsetHeight:(null===(l=this.block.stickyTo)||void 0===l?void 0:l.type)===B.LEFT&&t===g.X&&(o-=a.$el.offsetLeft+a.$el.offsetWidth)}var r=Math.floor(o/(s[e.size]/100*this.step)*this.step);this.repository.change(this.block.guid,e.offset,this.getNewRelativeSize(t,r))}}},{key:"getNewRelativeSize",value:function(t,i){var e=Math.floor(i/this.step)*this.step;return t===g.W||t===g.H?e>100?100:e<1?1:e:(t===g.X||t===g.Y)&&e<0?0:e}}],[{key:"getAbsoluteSizesByParent",value:function(t,i){var e=new C,o=i.parentElement;if(!o)return e;var s=o.getBoundingClientRect();return e.height=s.height/100*t.height,e.width=s.width/100*t.width,e}}]),t}(),G=e("ad3d"),R=e("ecee"),P=e("c074"),z=c["a"];R["c"].add(P["a"],P["c"],P["b"]);var H,L=z.extend({name:"Block",components:{FontAwesomeIcon:G["a"]},inject:{getStore:{default:function(){return function(){}}}},props:{block:{type:x},step:{type:Number},showHidden:{type:Boolean,default:!1},tabSettingsService:{type:Object}},data:function(){return{blockManager:void 0,isResizing:!1,isDragging:!1,currentPosition:{left:0,top:0,right:0,bottom:0},parentBlock:void 0,parentElement:void 0,ctrlPressed:!1,activeTabGuid:void 0,tabsOffset:0,blockWidth:0,tabsWidth:0,isShowArrows:!1,visitedTabs:[],stickyToBlock:void 0,stickyToElement:void 0}},computed:{children:function(){var t=this;return this.activeTabGuid?this.block.children.reduce((function(i,e){return e.parentTabGuid===t.activeTabGuid&&(t.visitedTabs.includes(e.guid)||t.visitedTabs.push(e.guid)),t.visitedTabs.includes(e.guid)&&i.push(e),i}),[]):this.block.children},availableTabs:function(){var t,i,e,o,s,n=this;return null===(t=this.block)||void 0===t||null===(i=t.tabs)||void 0===i||!i.use||(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)<1?[]:this.block.tabs.list.filter((function(t){if(n.tabSettingsService){var i=n.tabSettingsService.getIsHidden(t.guid),e=n.tabSettingsService.getIsBlocked(t.guid);if(i||e)return!1}return!0}))},visibleTabs:function(){var t,i,e,o,s;if(null===(t=this.block)||void 0===t||null===(i=t.tabs)||void 0===i||!i.use||(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)<1)return[];var n=this.tabSettingsService.tabSettings||{};if(this.tabSettingsService){var c={};for(var l in n)if(Object.prototype.hasOwnProperty.call(n,l)){var a=n[l].parentTabForTree;a&&(c[a]=!0)}for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(n[r].isExpanded=!1,!n[r].parentTabForTree&&c[r]&&(n[r].isShow=!0),n[r].parentTabForTree&&(n[r].isShow=!1),c[r]?n[r].isChild=!0:n[r].isChild=!1);var h={isChild:!1,isExpanded:!1,isShow:!1,parentTabForTree:""},d=this.block.tabs.list.map((function(t){return{guid:t.guid,name:t.name,data:n[t.guid]||h}}));return d}return[]},tabGuids:function(){var t;return((null===(t=this.block.tabs)||void 0===t?void 0:t.list)||[]).map((function(t){return t.guid}))},stickyLines:function(){return[]},zIndex:function(){var t,i,e=101;if(!this.block.parentGuid)return e+(null!==(i=this.block.tabs)&&void 0!==i&&i.use?1:0);var o=this.getStore().getRefByGuid(this.block.parentGuid);return o?o.zIndex+1+(null!==(t=this.block.tabs)&&void 0!==t&&t.use?1:0):e},isTabsContainer:function(){var t;return(null===(t=this.block.tabs)||void 0===t?void 0:t.use)||!1},directionTabs:function(){var t,i;return"left"===(null===(t=this.block.tabs)||void 0===t?void 0:t.position)||"right"===(null===(i=this.block.tabs)||void 0===i?void 0:i.position)},positionStyle:function(){var t,i,e,s,n,c,l,a,r,h,d={};switch(this.block.sticky){case o.TL:d={top:this.block.top+this.block.sizeTypes.top,left:this.block.left+this.block.sizeTypes.left};break;case o.TR:d={top:this.block.top+this.block.sizeTypes.top,right:this.block.right+this.block.sizeTypes.right};break;case o.BL:d={bottom:this.block.bottom+this.block.sizeTypes.bottom,left:this.block.left+this.block.sizeTypes.left};break;case o.BR:d={bottom:this.block.bottom+this.block.sizeTypes.bottom,right:this.block.right+this.block.sizeTypes.right};break;default:d={top:this.block.top+this.block.sizeTypes.top,left:this.block.left+this.block.sizeTypes.left};break}this.block.isHidden&&!this.showHidden&&(null!==(r=this.block.stickyTo)&&void 0!==r&&r.guid&&null!==(h=this.block.stickyTo)&&void 0!==h&&h.type&&(this.block.stickyTo.type===B.TOP?d.top="0px":this.block.stickyTo.type===B.LEFT&&(d.left="0px")));if(null!==(t=this.block.stickyTo)&&void 0!==t&&t.guid&&null!==(i=this.block.stickyTo)&&void 0!==i&&i.type){var u=this.stickyToBlock,b=this.stickyToElement;if(u&&u.parentGuid===this.block.parentGuid&&b)switch(this.block.stickyTo.type){case B.TOP:d.top="calc(".concat(b.positionStyle.height," + ").concat(b.positionStyle.top," + ").concat(d.top,")");break;case B.LEFT:d.left="calc(".concat(b.positionStyle.width," + ").concat(b.positionStyle.left," + ").concat(d.left,")");break}}var v=this.block.width+this.block.sizeTypes.width,f=this.block.height+this.block.sizeTypes.height;return this.block.widthCalc&&this.block.widthCalc.type&&this.block.widthCalc.value&&(v="calc(".concat(v," ").concat(this.block.widthCalc.type," ").concat(this.block.widthCalc.value,"px)")),this.block.heightCalc&&this.block.heightCalc.type&&this.block.heightCalc.value&&(f="calc(".concat(f," ").concat(this.block.heightCalc.type," ").concat(this.block.heightCalc.value,"px)")),this.block.isHidden&&!this.showHidden&&(v="0px",f="0px"),null!==(e=this.block.stickyTo)&&void 0!==e&&e.guid||null===(s=this.block.onCenter)||void 0===s||!s.horizontal||(this.block.sticky===o.BL||this.block.sticky===o.TL?d.left="calc(50% - calc(".concat(v," / 2))"):d.right="calc(50% - calc(".concat(v," / 2))")),null!==(n=this.block.stickyTo)&&void 0!==n&&n.guid||null===(c=this.block.onCenter)||void 0===c||!c.horizontalAdaptive||(d.marginLeft="auto",d.marginLeft="auto",d.marginRight="auto",d.left="0",d.right="0"),null!==(l=this.block.stickyTo)&&void 0!==l&&l.guid||null===(a=this.block.onCenter)||void 0===a||!a.vertical||(this.block.sticky===o.TR||this.block.sticky===o.TL?d.top="calc(50% - calc(".concat(f," / 2))"):d.bottom="calc(50% - calc(".concat(f," / 2))")),Object.assign(d,{width:v,height:f,zIndex:this.zIndex})},blockTabStyle:function(){var t="";return this.block.tabs&&(t+=this.block.tabs.tabStyle),t},blockContentStyle:function(){var t,i="",e=this.block;(e.style&&(i+=e.style),e.isHover)&&(null!==(t=e.interactive)&&void 0!==t&&t.containerHoverStyle&&(i+="; "+e.interactive.containerHoverStyle));return i},isShowChildren:function(){var t,i=!0,e=this.block;return"registry"===(null===(t=e.properties)||void 0===t?void 0:t.contentType)&&(i=!1),i}},watch:{"block.sticky":{handler:function(t){var i,e,n=this;if(t){var c=this.$el.parentElement;if(c){null!==(i=this.block.stickyTo)&&void 0!==i&&i.guid&&t!==o.TL&&(this.block.stickyTo.guid=void 0);var l=(e={},Object(v["a"])(e,o.TL,["top","left"]),Object(v["a"])(e,o.TR,["top","right"]),Object(v["a"])(e,o.BL,["bottom","left"]),Object(v["a"])(e,o.BR,["bottom","right"]),e),a={top:"offsetHeight",left:"offsetWidth",bottom:"offsetHeight",right:"offsetWidth"},r=l[t];r.forEach((function(t){n.block[t]=n.block.sizeTypes[t]===s.PERCENT?Math.round(n.currentPosition[t]/(c[a[t]]/100)):Math.round(n.currentPosition[t])}))}}}},"block.stickyTo.guid":{handler:function(t,i){var e,o,n,c;if(this.$el.parentElement)if(this.setSticky(t),!i||t){if(t&&null!==(e=this.block.stickyTo)&&void 0!==e&&e.guid){var l=this.getStore().getRefByGuid(null===(o=this.block.stickyTo)||void 0===o?void 0:o.guid);if((null===(n=this.block.stickyTo)||void 0===n?void 0:n.type)===B.TOP){var a=l.$el.offsetTop+l.$el.offsetHeight;this.block.sizeTypes.top===s.PERCENT&&(a/=this.$el.parentElement.offsetHeight/100),this.block.top=Math.round((this.block.top||0)-a)}else if((null===(c=this.block.stickyTo)||void 0===c?void 0:c.type)===B.LEFT){var r=l.$el.offsetLeft+l.$el.offsetWidth;this.block.sizeTypes.left===s.PERCENT&&(r/=this.$el.parentElement.offsetWidth/100),this.block.left=Math.round((this.block.left||0)-r)}}}else{var h,d,u=this.getStore().getRefByGuid(i);if((null===(h=this.block.stickyTo)||void 0===h?void 0:h.type)===B.TOP){var b=u.$el.offsetTop+u.$el.offsetHeight;this.block.sizeTypes.top===s.PERCENT&&(b/=this.$el.parentElement.offsetHeight/100),this.block.top=Math.round((this.block.top||0)+b)}else if((null===(d=this.block.stickyTo)||void 0===d?void 0:d.type)===B.LEFT){var v=u.$el.offsetLeft+u.$el.offsetWidth;this.block.sizeTypes.left===s.PERCENT&&(v/=this.$el.parentElement.offsetWidth/100),this.block.left=Math.round((this.block.left||0)+v)}}}},activeTabGuid:function(t){this.getStore().setActiveTab(this.block.guid,t)},"block.tabs.list":{handler:function(){var t,i,e,o,s=this;(this.isTabsContainer&&setTimeout((function(){s.setIsShowArrows()}),0),1===(null===(t=this.block.tabs)||void 0===t?void 0:t.list.length)&&this.block.children.forEach((function(t){var i;t.parentTabGuid=null===(i=s.block.tabs)||void 0===i?void 0:i.list[0].guid})),null!==(i=this.block.tabs)&&void 0!==i&&i.list.find((function(t){return t.guid===s.activeTabGuid})))||null!==(e=this.block.tabs)&&void 0!==e&&null!==(o=e.list[0])&&void 0!==o&&o.guid&&this.onTabClick(this.block.tabs.list[0].guid)},deep:!0},"block.sizeTypes.width":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetWidth,o=this.block.width;this.block.width=this.calcSwitchedSizes(t,e,o)}},deep:!0},"block.sizeTypes.height":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetHeight,o=this.block.height;this.block.height=this.calcSwitchedSizes(t,e,o)}},deep:!0},"block.sizeTypes.top":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetHeight,o=this.block.top;o&&(this.block.top=this.calcSwitchedSizes(t,e,o))}},deep:!0},"block.sizeTypes.left":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetWidth,o=this.block.left;o&&(this.block.left=this.calcSwitchedSizes(t,e,o))}},deep:!0},"block.sizeTypes.right":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetWidth,o=this.block.right;o&&(this.block.right=this.calcSwitchedSizes(t,e,o))}},deep:!0},"block.sizeTypes.bottom":{handler:function(t,i){if(t!==i&&t&&this.$el.parentElement){var e=this.$el.parentElement.offsetHeight,o=this.block.bottom;o&&(this.block.bottom=this.calcSwitchedSizes(t,e,o))}},deep:!0},"block.width":{handler:function(){this.isTabsContainer&&this.setIsShowArrows()}},tabGuids:function(t,i){var e=this;if(t.length<i.length){var o=i.filter((function(i){return!t.includes(i)}))[0];o&&this.block.children.forEach((function(t){t.parentTabGuid===o&&e.getStore().remove(t.guid)}))}}},mounted:function(){var t,i,e,o,s,n=this;null!==(t=this.block)&&void 0!==t&&null!==(i=t.tabs)&&void 0!==i&&i.use&&(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)>0&&this.onTabClick(this.block.tabs.list[0].guid),this.getStore().addRef(this.block.guid,this),this.$nextTick((function(){var t,i;n.onDrag(),n.isTabsContainer&&n.setIsShowArrows(),n.setSticky(null===(t=n.block)||void 0===t||null===(i=t.stickyTo)||void 0===i?void 0:i.guid)}))},beforeDestroy:function(){this.getStore().removeRef(this.block.guid)},methods:{showChildTabs:function(t){this.block.tabs&&this.visibleTabs.forEach((function(i){i.guid===t&&(i.data.isExpanded=!i.data.isExpanded),i.data.parentTabForTree===t&&(i.data.isShow=!i.data.isShow)}))},setSticky:function(t){t?(this.stickyToBlock=this.getStore().getByGuid(t),this.stickyToElement=this.getStore().getRefByGuid(t)):(this.stickyToBlock=void 0,this.stickyToElement=void 0)},setIsShowArrows:function(){var t,i;if(this.$refs.draggableContainer){var e=this.$refs.tabsScroll,o=this.$refs.draggableContainer,s=e.offsetWidth;this.tabsWidth=e.offsetWidth;var n=o.offsetWidth;this.blockWidth=o.offsetWidth,s>n&&"left"!==(null===(t=this.block.tabs)||void 0===t?void 0:t.position)&&"right"!==(null===(i=this.block.tabs)||void 0===i?void 0:i.position)?this.isShowArrows=!0:(this.isShowArrows=!1,e.style.transform="translateX(-".concat(0,"px)"))}},calcSwitchedSizes:function(t,i,e){return t===s.PIXEL?Math.round(i/100*e):Math.round(e/(i/100))},getBlockTabStyle:function(t){var i=";";if(this.block.tabs&&t.guid===this.activeTabGuid){var e=this.block.tabs.activeTabStyle;e&&(i+="; "+this.block.tabs.activeTabStyle)}if(this.tabSettingsService){if(this.tabSettingsService.getIsStyled(t.guid)){var o=this.tabSettingsService.getStyle(t.guid);o&&(i+="; "+o)}this.tabSettingsService.getIsHidden(t.guid)&&(i+="; color: #f46666; cursor: not-allowed; "),this.tabSettingsService.getIsBlocked(t.guid)&&(i+="; color: gray; cursor: not-allowed; ")}return i},onTabClick:function(t){this.tabSettingsService&&this.tabSettingsService.getIsBlocked(t)||(this.activeTabGuid=t)},onDrag:function(){if(this.$refs.draggableContainer){var t,i,e=this.$refs.draggableContainer;if(this.currentPosition.left=e.offsetLeft,this.currentPosition.top=e.offsetTop,e.parentElement)this.currentPosition.bottom=(null===(t=e.parentElement)||void 0===t?void 0:t.offsetHeight)-e.offsetTop-e.offsetHeight,this.currentPosition.right=(null===(i=e.parentElement)||void 0===i?void 0:i.offsetWidth)-e.offsetLeft-e.offsetWidth}},getBlockManager:function(){return"undefined"===typeof this.blockManager&&(this.blockManager=new O(this.block,this.getStore(),this.$refs.draggableContainer,this.step)),this.blockManager},resizeStart:function(t){t.preventDefault(),this.$emit("start-drag",this.block),this.getBlockManager().startDrag(t,"resize"),this.isResizing=!0,document.addEventListener("mousemove",this.elementDrag),document.addEventListener("mouseup",this.dragStop)},dragStart:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.block.isEditing||(t.preventDefault(),this.$emit("start-drag",this.block),this.getBlockManager().startDrag(t,"drag",i),this.isDragging=!0,document.addEventListener("mousemove",this.elementDrag),document.addEventListener("mouseup",this.dragStop),document.addEventListener("keydown",this.keyDown),document.addEventListener("keyup",this.keyUp))},elementDrag:function(t){var i=this;t.preventDefault(),this.$emit("dragging",this.block),this.getBlockManager().change(t),this.isDragging&&this.$nextTick((function(){i.onDrag()}))},keyDown:function(t){t.ctrlKey&&(this.ctrlPressed=!0)},keyUp:function(t){"Control"===t.key&&(this.ctrlPressed=!1)},dragStop:function(){this.$emit("stop-drag",this.block),this.isResizing=!1,this.isDragging=!1,this.ctrlPressed=!1,document.removeEventListener("mousemove",this.elementDrag),document.removeEventListener("mouseup",this.dragStop),document.removeEventListener("keydown",this.keyDown),document.removeEventListener("keyup",this.keyUp)},getNextTab:function(){var t=this,i=this.availableTabs.findIndex((function(i){return i.guid===t.activeTabGuid}));return"number"===typeof i&&this.availableTabs[i+1]?this.availableTabs[i+1].guid:""},getPrevTab:function(){var t=this,i=this.availableTabs.findIndex((function(i){return i.guid===t.activeTabGuid}));return"number"===typeof i&&this.availableTabs[i-1]?this.availableTabs[i-1].guid:""},scrollPrevTab:function(){var t=this.$refs.tabsScroll,i=this.$refs.draggableContainer,e=i.offsetWidth;this.blockWidth=i.offsetWidth,this.tabsOffset-=e/2,this.tabsOffset<0&&(this.tabsOffset=0),t.style.transform="translateX(-".concat(this.tabsOffset,"px)")},scrollNextTab:function(){var t=this.$refs.tabsScroll,i=this.$refs.draggableContainer,e=t.offsetWidth,o=i.offsetWidth;this.blockWidth=i.offsetWidth,e-o<this.tabsOffset||(this.tabsOffset+=o/1.5,t.style.transform="translateX(-".concat(this.tabsOffset,"px)"))}}}),A=L,j=(e("1fc4"),e("2877")),N=Object(j["a"])(A,u,b,!1,null,"2a65eaf7",null),I=N.exports;(function(t){t[t["DEFAULT"]=0]="DEFAULT",t[t["INTERACTIVE"]=1]="INTERACTIVE"})(H||(H={}));e("c975"),e("b64b"),e("07ac"),e("ac1f"),e("25f0"),e("5319");var W,M=function(){function t(){Object(f["a"])(this,t)}return Object(k["a"])(t,null,[{key:"generate",value:function(){var t=(new Date).getTime();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===i?e:3&e|8).toString(16)}))}}]),t}();(function(t){t["ADD_BLOCK"]="addBlock",t["REMOVE_BLOCK"]="removeBlock"})(W||(W={}));var D=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(f["a"])(this,t),this.blocks=[],this.previousRequiredBlocks=[],this.listeners={},this.refs=[],this.blocks=i,this.isPreviewMode=e}return Object(k["a"])(t,[{key:"set",value:function(t){this.resetActiveBlock(),this.blocks=this.prepareBlocks(t)}},{key:"prepareBlocks",value:function(t){var i=this;return t.map((function(t){var e,o,s,n=[];("undefined"!==typeof t.children&&t.children.length>0&&(n=i.prepareBlocks(t.children)),null!==(e=t.replication)&&void 0!==e&&e.function)&&(o=null===(s=t.replication)||void 0===s?void 0:s.function);return t=JSON.parse(JSON.stringify(t)),t.isHidden=!1,o&&t.replication&&(t.replication.function=o),t.children=n,new x(t)}))}},{key:"change",value:function(t,i,e){var o=this.getByGuid(t);"undefined"!==typeof o&&(o[i]=e)}},{key:"getByGuid",value:function(t){var i;return JSON.stringify(this.blocks,(function(e,o){return o&&o.guid===t&&"undefined"!==typeof o.sticky&&(i=o),o})),i}},{key:"getByTabGuid",value:function(t){var i=[];return JSON.stringify(this.blocks,(function(e,o){return o&&o.parentTabGuid===t&&"undefined"!==typeof o.sticky&&!i.includes(o.guid)&&i.push(o.guid),o})),i}},{key:"getByAlias",value:function(t){var i;return JSON.stringify(this.blocks,(function(e,o){return o&&o.alias===t&&"undefined"!==typeof o.sticky&&(i=o),o})),i}},{key:"getMainParents",value:function(t){var i,e;e=this.get();for(var o=0;o<e.length;o++)if(JSON.stringify(e[o]).includes(t)){i=e[o];break}return i}},{key:"add",value:function(t){var i,e=t.guid;t.guid=M.generate();var o,s,n=t.children;(t.children=[],t.parentGuid)?(i=this.getByGuid(t.parentGuid),"undefined"!==typeof i&&(null!==(o=i.tabs)&&void 0!==o&&o.use&&null!==(s=i.tabs)&&void 0!==s&&s.activeGuid&&!this.isPreviewMode&&(t.parentTabGuid=i.tabs.activeGuid),i.children.push(new x(t)))):this.blocks.push(new x(t));return this.emitEvent(W.ADD_BLOCK,{oldGuid:e,guid:t.guid}),n&&n.length>0&&this.addChildren(n,t.guid),t.guid}},{key:"addChildren",value:function(t,i){var e=this,o={},s={};t.forEach((function(t){var n,c=t.guid,l=e.add(Object.assign(t,{parentGuid:i}));c&&(o[c]=l,null!==(n=t.stickyTo)&&void 0!==n&&n.guid&&(s[c]=t.stickyTo.guid))})),Object.keys(s).forEach((function(t){var i=e.getByGuid(o[t]);if(i){var n=o[s[t]];n&&i.stickyTo&&(i.stickyTo.guid=n)}}))}},{key:"setRequiredTab",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=this.getByGuid(t),o=[];if(null!==e&&void 0!==e&&e.parentTabGuid&&null!==e&&void 0!==e&&e.parentGuid){var s,n,c=this.getByGuid(null===e||void 0===e?void 0:e.parentGuid);if(null===c||void 0===c||!c.tabs||null!==c&&void 0!==c&&null!==(s=c.tabs)&&void 0!==s&&s.requiredTabs||(c.tabs.requiredTabs=[]),null!==c&&void 0!==c&&null!==(n=c.tabs)&&void 0!==n&&n.requiredTabs)if(i){var l=c.tabs.requiredTabs.indexOf(e.parentTabGuid);l>-1&&c.tabs.requiredTabs.splice(l,1)}else c.tabs.requiredTabs.push(e.parentTabGuid)}return null!==e&&void 0!==e&&e.parentGuid&&this.setRequiredTab(e.parentGuid,i),o}},{key:"setRequiredTabs",value:function(t){var i=this;this.previousRequiredBlocks.forEach((function(t){return i.setRequiredTab(t,!0)})),t.forEach((function(t){return i.setRequiredTab(t)})),this.previousRequiredBlocks=t}},{key:"get",value:function(){return this.blocks}},{key:"getFlat",value:function(){var t=this;return this.refs.map((function(i){return t.getByGuid(i.guid)}))}},{key:"remove",value:function(t){var i,e=this,o=this.getByGuid(t);if(o){if(null!==(i=o.children)&&void 0!==i&&i.length&&o.children.forEach((function(t){return e.remove(t.guid)})),o.parentGuid){var s=this.getByGuid(o.parentGuid);if(!s)return;s.children=s.children.filter((function(i){return i.guid!==t}))}else this.blocks=this.blocks.filter((function(i){return i.guid!==t}));this.emitEvent(W.REMOVE_BLOCK,{guid:t})}}},{key:"resetActiveBlock",value:function(){JSON.stringify(this.blocks,(function(t,i){return i&&"undefined"!==typeof i.isActive&&(i.isActive=!1,i.isActiveAsParent=!1),i}))}},{key:"setActiveBlock",value:function(t){this.resetActiveBlock();var i=this.getByGuid(t);if("undefined"!==typeof i&&(i.isActive=!0,i.parentGuid)){var e=this.getByGuid(i.parentGuid);"undefined"!==typeof e&&(e.isActiveAsParent=!0)}}},{key:"setActiveTab",value:function(t,i){var e=this.getByGuid(t);"undefined"!==typeof e&&e.tabs&&e.tabs.use&&(e.tabs.activeGuid=i)}},{key:"addRef",value:function(t,i){this.refs.push({guid:t,element:i})}},{key:"getRefByGuid",value:function(t){var i=this.refs.find((function(i){return i.guid===t}));if(i)return i.element}},{key:"removeRef",value:function(t){this.refs=this.refs.filter((function(i){return i.guid!==t}))}},{key:"getStickyLines",value:function(t){var i,e=this,s=t?null===(i=this.getByGuid(t))||void 0===i?void 0:i.children:this.blocks;if(!s)return[];var n=[];return s.filter((function(t){var i;return"undefined"!==(null===(i=t.stickyTo)||void 0===i?void 0:i.guid)})).forEach((function(t){var i;if(null===(i=t.stickyTo)||void 0===i||!i.guid||t.sticky!==o.TL)return!1;var s=e.getRefByGuid(t.stickyTo.guid),c=e.getRefByGuid(t.guid);if(!c||!s)return!1;t.stickyTo.type===B.TOP?n.push({x1:"calc(".concat(c.positionStyle.left," + calc(").concat(c.positionStyle.width," / 2))"),y1:c.positionStyle.top,x2:"calc(".concat(s.positionStyle.left," + calc(").concat(s.positionStyle.width," / 2))"),y2:"calc(".concat(s.positionStyle.top," + ").concat(s.positionStyle.height,")")}):t.stickyTo.type===B.LEFT&&n.push({x1:c.positionStyle.left,y1:"calc(".concat(c.positionStyle.top," + calc(").concat(c.positionStyle.height," / 2))"),x2:"calc(".concat(s.positionStyle.left," + ").concat(s.positionStyle.width,")"),y2:"calc(".concat(s.positionStyle.top," + calc(").concat(s.positionStyle.height," / 2))")})})),n}},{key:"addListener",value:function(t){var i=M.generate();return this.listeners[i]=t,i}},{key:"removeListener",value:function(t){delete this.listeners[t]}},{key:"emitEvent",value:function(t,i){Object.values(this.listeners).forEach((function(e){e.isSubscribed(t)&&e.handle(i)}))}}]),t}(),X=function(){function t(i){Object(f["a"])(this,t),this.handler=i}return Object(k["a"])(t,[{key:"handle",value:function(t){this.handler(t)}},{key:"isSubscribed",value:function(t){return t===W.REMOVE_BLOCK}}]),t}(),F=e("b85c"),Y=function(){function t(i,e){Object(f["a"])(this,t),this.tabSettings=i,this.context=e}return Object(k["a"])(t,[{key:"createTabSetting",value:function(t){var i={isHidden:!1,isBlocked:!1,isStyled:!0,isDefaultTab:!1,isExpanded:!1,parentTabForTree:"",style:"",interactive:{}};return this.context.$set(this.tabSettings,t,i),i}},{key:"createTabSettings",value:function(t){var i,e=Object(F["a"])(t);try{for(e.s();!(i=e.n()).done;){var o=i.value;this.getTabSettingByGuid(o)||this.createTabSetting(o)}}catch(s){e.e(s)}finally{e.f()}}},{key:"getTabSettingByGuid",value:function(t){if(this.tabSettings){var i=this.tabSettings[t];if(i)return this.restoreTabSettingsStructure(i),i}}},{key:"restoreTabSettingsStructure",value:function(t){t&&("isHidden"in t||this.context.$set(t,"isHidden",!1),"isBlocked"in t||this.context.$set(t,"isBlocked",!1),"isStyled"in t||this.context.$set(t,"isStyled",!0),"isDefaultTab"in t||this.context.$set(t,"isDefaultTab",!1),"isExpanded"in t||this.context.$set(t,"isExpanded",!1),"parentTabForTree"in t||this.context.$set(t,"parentTabForTree",""),"hiddenConditions"in t||this.context.$set(t,"hiddenConditions",{type:"never"}),"blockedConditions"in t||this.context.$set(t,"blockedConditions",{type:"never"}),"styledConditions"in t||this.context.$set(t,"styledConditions",{type:"always"}))}},{key:"deleteTabOnGuid",value:function(t){this.tabSettings[t]?delete this.tabSettings[t]:console.warn("Вкладка с ".concat(t," не найден"))}},{key:"getHiddenConditions",value:function(t){var i=this.getTabSettingByGuid(t);if(i)return i.hiddenConditions}},{key:"setHiddenConditions",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"hiddenConditions",i)}},{key:"getBlockedConditions",value:function(t){var i=this.getTabSettingByGuid(t);if(i)return i.blockedConditions}},{key:"setInteractive",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"interactive",i)}},{key:"getInteractive",value:function(t){var i=this.getTabSettingByGuid(t);if(i)return i.interactive}},{key:"setBlockedConditions",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"blockedConditions",i)}},{key:"getStyledConditions",value:function(t){var i=this.getTabSettingByGuid(t);if(i)return i.styledConditions}},{key:"setStyledConditions",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"styledConditions",i)}},{key:"getIsHidden",value:function(t){var i=this.getTabSettingByGuid(t);return!(!i||!("isHidden"in i))&&i.isHidden}},{key:"setIsHidden",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"isHidden",i)}},{key:"getIsBlocked",value:function(t){var i=this.getTabSettingByGuid(t);return!(!i||!("isBlocked"in i))&&i.isBlocked}},{key:"setIsBlocked",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"isBlocked",i)}},{key:"getIsStyled",value:function(t){var i=this.getTabSettingByGuid(t);return!(!i||!("isStyled"in i))&&i.isStyled}},{key:"setIsStyled",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"isStyled",i)}},{key:"getStyle",value:function(t){var i=this.getTabSettingByGuid(t);if(i)return i.style}},{key:"setStyle",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"style",i)}},{key:"getIsDefaultTab",value:function(t){var i=this.getTabSettingByGuid(t);return!(!i||!("isDefaultTab"in i))&&i.isDefaultTab}},{key:"setIsDefaultTab",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"isDefaultTab",i)}},{key:"getParentTabForTree",value:function(t){var i=this.getTabSettingByGuid(t);return i&&"parentTabForTree"in i?i.parentTabForTree:""}},{key:"setParentTabForTree",value:function(t,i){var e=this.getTabSettingByGuid(t)||this.createTabSetting(t);this.context.$set(e,"parentTabForTree",i)}}]),t}(),q=c["a"],V=q.extend({name:"VueDraggableResponsiveDesigner",components:{Block:I},provide:function(){return{getStore:this.getStore}},props:{step:{type:Number,default:.5},blocks:{type:Array,default:function(){return[]}},showHidden:{type:Boolean,default:!1},tabSettings:{type:Object}},data:function(){return{store:new D,blocksArray:this.blocks,tabSettingsService:new Y(this.tabSettings,this)}},computed:{_blocks:function(){return this.getStore().get()},stickyLines:function(){return this.getStore().getStickyLines()}},watch:{tabSettings:{handler:function(){this.$set(this.tabSettingsService,"tabSettings",this.tabSettings)}}},mounted:function(){this.store.addListener(new X(this.onBlockRemove))},methods:{onBlockRemove:function(t){this.$emit("block-remove",t.guid)},getAllBlockRefs:function(){var t={};return this.getRefs(this._blocks,this,t),t},getRefs:function(t,i,e){var o=this;t.forEach((function(t){var s,n=i.$refs[t.guid],c=n[0];e[t.guid]=c,(null===(s=t.children)||void 0===s?void 0:s.length)>0&&c&&o.getRefs(t.children,c,e)}))},setActiveBlock:function(t){this.store.setActiveBlock(t)},clearActiveBlock:function(){this.store.resetActiveBlock()},getStore:function(){return this.store},getBlocks:function(){return this.store.get()},getMainParents:function(t){return this.store.getMainParents(t)},setBlocks:function(t){var i=this;this.store.set([]),this.$nextTick((function(){i.store.set(t)}))},getMousePosition:function(t,i){var e=this.$el.getBoundingClientRect(),o=i.top===s.PIXEL?t.clientY-e.top:(t.clientY-e.top)/(e.height/100)-2,n=i.left===s.PIXEL?t.clientX-e.left:(t.clientX-e.left)/(e.width/100)-2,c=i.left===s.PIXEL?e.width-t.clientX+e.left:100-(t.clientX/(e.width/100)+2),l=i.top===s.PIXEL?e.height-t.clientY+e.top:100-(t.clientY/(e.height/100)+2);return{top:Math.floor(o),right:Math.floor(c),bottom:Math.floor(l),left:Math.floor(n)}},addBlock:function(t){var i=this,e=t.width,n=void 0===e?0:e,c=t.height,l=void 0===c?0:c,a=t.top,r=void 0===a?void 0:a,h=t.right,d=void 0===h?void 0:h,u=t.bottom,b=void 0===u?void 0:u,v=t.left,f=void 0===v?void 0:v,k=t.sticky,g=void 0===k?o.TL:k,p=t.stickyTo,y=void 0===p?void 0:p,T=t.parentGuid,m=void 0===T?void 0:T,S=t.sizeTypes,w=void 0===S?{width:s.PERCENT,height:s.PERCENT,top:s.PERCENT,right:s.PERCENT,bottom:s.PERCENT,left:s.PERCENT}:S,x=t.className,C=void 0===x?void 0:x,B=t.event,E=void 0===B?void 0:B,_=t.type,$=void 0===_?H.DEFAULT:_,O=t.isStretched,G=void 0!==O&&O,R=t.tabs,P=void 0===R?void 0:R,z=t.replication,L=void 0===z?void 0:z,A=t.pagination,j=void 0===A?void 0:A,N=t.minMax,I=void 0===N?void 0:N,W=t.onCenter,M=void 0===W?void 0:W,D=t.alias,X=void 0===D?void 0:D;if($===H.INTERACTIVE&&"undefined"!==typeof E){var F=this.getMousePosition(E,w);r=F.top,d=F.right,b=F.bottom,f=F.left}var Y=this.store.add({width:n,height:l,top:r,right:d,bottom:b,left:f,sticky:g,stickyTo:y,parentGuid:m,sizeTypes:w,isStretched:G,tabs:P,className:C,replication:L,pagination:j,minMax:I,onCenter:M,alias:X});return $===H.INTERACTIVE&&"undefined"!==typeof E&&this.$nextTick((function(){var t=i.getAllBlockRefs()[Y];t.onDrag(),t.dragStart(E,!0)})),Y},removeBlock:function(t){this.store.remove(t)}}}),J=V,K=(e("ad8b"),Object(j["a"])(J,h,d,!1,null,"683d5d5c",null)),U=K.exports,Q=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container"},t._l(t._blocks,(function(i){return e("preview-block",{directives:[{name:"show",rawName:"v-show",value:!i.isHidden,expression:"!block.isHidden"}],key:i.guid,ref:i.guid,refInFor:!0,attrs:{block:i,"replication-callback":t.replicationCallback,"tab-settings-service":t.tabSettingsService},on:{click:function(i){return t.$emit("click",i)},"tab-click":function(i){return t.$emit("tab-click",i)}},scopedSlots:t._u([t._l(t.$scopedSlots,(function(i,e){return{key:e,fn:function(i){return[t._t(e,null,null,i)]}}}))],null,!0)})})),1)},Z=[],tt=function(){var t,i,e=this,o=e.$createElement,s=e._self._c||o;return s("div",{ref:"draggableContainer",class:["block",e.block.className],style:e.positionStyle},[e.isTabsContainer?s("div",{class:{tabs_container:!0,custom_scrollbar:!0,position_top:"top"===e.block.tabs.position,position_right:"right"===e.block.tabs.position,position_bottom:"bottom"===e.block.tabs.position,position_left:"left"===e.block.tabs.position},style:e.block.tabs.containerStyle},[s("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.isShowArrows,expression:"isShowArrows"}],staticClass:"tabs_button",class:(t={},t[e.block.tabs.tabArrowsClass]=!0,t),attrs:{icon:"chevron-left"},on:{click:e.scrollPrevTab}}),s("div",{ref:"tabsScroll",staticClass:"tabs_onScroll",class:{tabs_padding:e.isShowArrows,direction:e.directionTabs}},e._l(e.visibleTabs,(function(t){var i;return s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowTabs(t),expression:"isShowTabs(tab)"}],key:t.guid,class:(i={tab:!0,active:t.guid===e.activeTabGuid},i[e.block.tabs.class]=!0,i["required_tab"]=e.block.tabs.requiredTabs&&e.block.tabs.requiredTabs.includes(t.guid),i["positionTab"]=t.data&&t.data.isChild,i),style:e.blockTabStyle+e.getBlockTabStyle(t),on:{click:function(i){return e.onTabClick(t.guid)}}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.data&&t.data.isChild,expression:"tab.data && tab.data.isChild"}],on:{click:function(i){return e.showChildTabs(t.guid)}}},[s("i",{staticClass:"plus",class:{"el-icon-arrow-right":!t.data.isExpanded,"el-icon-arrow-down":t.data.isExpanded}})]),s("span",{staticClass:"label"},[e._v(e._s(t.name))])])})),0),s("font-awesome-icon",{directives:[{name:"show",rawName:"v-show",value:e.isShowArrows,expression:"isShowArrows"}],staticClass:"tabs_button tabs_button_next",class:(i={},i[e.block.tabs.tabArrowsClass]=!0,i),attrs:{icon:"chevron-right"},on:{click:e.scrollNextTab}})],1):e._e(),s("div",{ref:"container",staticClass:"content custom_scrollbar",class:{scroll_hover:e.isActiveScrollHover},style:e.blockContentStyle,on:{mouseover:function(t){e.block.isHover=!0},mouseleave:function(t){e.block.isHover=!1},click:function(t){return e.$emit("click",{block:t.block||e.block,event:t.event||t})}}},[e.isTabsContainer?e._e():e._t("content",null,{block:e.block}),e._l(e.children,(function(t){return s("preview-block",{directives:[{name:"show",rawName:"v-show",value:e.isShowChildren&&!t.isHidden,expression:"(isShowChildren && !_block.isHidden )"}],key:t.guid,ref:t.guid,refInFor:!0,class:t.parentTabGuid===e.activeTabGuid?"":"visibility",attrs:{"is-showing":e.isShowChildren&&t.parentTabGuid===e.activeTabGuid&&!t.isHidden,block:t,"replication-callback":e.replicationCallback,"tab-settings-service":e.tabSettingsService},on:{click:function(i){return e.$emit("click",{block:i.block||t,event:i.event||i})},"tab-click":function(t){return e.$emit("tab-click",t)}},scopedSlots:e._u([e._l(e.$scopedSlots,(function(t,i){return{key:i,fn:function(t){return[e._t(i,null,null,t)]}}}))],null,!0)})}))],2)])},it=[],et=(e("45fc"),e("5530")),ot=e("6dd8"),st=function(){function t(i){Object(f["a"])(this,t),this.handler=i}return Object(k["a"])(t,[{key:"handle",value:function(t){this.handler(t)}},{key:"isSubscribed",value:function(t){return t===W.ADD_BLOCK}}]),t}(),nt=c["a"];R["c"].add(P["a"],P["c"],P["b"]);var ct=nt.extend({name:"PreviewBlock",components:{FontAwesomeIcon:G["a"]},inject:{getStore:{default:function(){return function(){}}}},props:{block:{type:x},replicationCallback:Function,isShowing:{type:Boolean,default:!0},tabSettingsService:{type:Object}},data:function(){return{parentBlock:void 0,parentElement:void 0,scrollHeight:void 0,scrollWidth:void 0,activeTabGuid:void 0,replicationIndex:0,tabsOffset:0,blockWidth:0,tabsWidth:0,isShowArrows:!1,visitedTabGuids:[],stickyToBlock:void 0,stickyToElement:void 0}},computed:{children:function(){var t,i,e=this;return null!==(t=this.block)&&void 0!==t&&null!==(i=t.tabs)&&void 0!==i&&i.use?this.block.children.filter((function(t){return t.parentTabGuid&&e.visitedTabGuids.includes(t.parentTabGuid)})):this.block.children},availableTabs:function(){var t,i,e,o,s,n=this;return null===(t=this.block)||void 0===t||null===(i=t.tabs)||void 0===i||!i.use||(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)<1?[]:this.block.tabs.list.filter((function(t){if(n.tabSettingsService){var i=n.tabSettingsService.getIsHidden(t.guid),e=n.tabSettingsService.getIsBlocked(t.guid);if(i||e)return!1}return!0}))},visibleTabs:function(){var t,i,e,o,s,n=this;if(null===(t=this.block)||void 0===t||null===(i=t.tabs)||void 0===i||!i.use||(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)<1)return[];var c=this.tabSettingsService.tabSettings||{};if(this.tabSettingsService){var l={};for(var a in c)if(Object.prototype.hasOwnProperty.call(c,a)){var r=c[a].parentTabForTree;r&&(l[r]=!0)}for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&(c[h].isExpanded=!1,!c[h].parentTabForTree&&l[h]&&(c[h].isShow=!0),c[h].parentTabForTree&&(c[h].isShow=!1),l[h]?c[h].isChild=!0:c[h].isChild=!1);var d={isChild:!1,isExpanded:!1,isShow:!1,parentTabForTree:""},u=this.block.tabs.list.filter((function(t){var i=n.tabSettingsService.getIsHidden(t.guid);return!i})).map((function(t){return{guid:t.guid,name:t.name,data:c[t.guid]||d}}));return u}return[]},directionTabs:function(){var t,i;return"left"===(null===(t=this.block.tabs)||void 0===t?void 0:t.position)||"right"===(null===(i=this.block.tabs)||void 0===i?void 0:i.position)},zIndex:function(){var t,i,e=101;if(!this.block.parentGuid)return e+(null!==(i=this.block.tabs)&&void 0!==i&&i.use?1:0);var o=this.getStore().getRefByGuid(this.block.parentGuid);return o?o.zIndex+1+(null!==(t=this.block.tabs)&&void 0!==t&&t.use?1:0):e},isTabsContainer:function(){var t;return(null===(t=this.block.tabs)||void 0===t?void 0:t.use)||!1},positionStyle:function(){var t,i,e,n,c,l,a,r,h,d,u,b,v,f,k,g,p,y,T={},m=this.block.height+this.block.sizeTypes.height,S=this.block.width+this.block.sizeTypes.width;switch(this.block.sticky){case o.TL:if(u=this.block.top+this.block.sizeTypes.top,b=this.block.left+this.block.sizeTypes.left,this.block.parentGuid&&"undefined"!==typeof this.parentBlock&&this.parentBlock.isStretched&&this.isTabsContainer){var w=O.getAbsoluteSizesByParent(this.parentBlock,this.parentElement);this.block.sizeTypes.top===s.PERCENT&&(u="".concat(w.height/100*(this.block.top||0),"px"),m="".concat(w.height/100*this.block.height,"px")),this.block.sizeTypes.left===s.PERCENT&&(b="".concat(w.width/100*(this.block.left||0),"px"),S="".concat(w.width/100*this.block.width,"px"))}T={top:u,left:b};break;case o.TR:T={top:this.block.top+this.block.sizeTypes.top,right:this.block.right+this.block.sizeTypes.right};break;case o.BL:T={bottom:this.block.bottom+this.block.sizeTypes.bottom,left:this.block.left+this.block.sizeTypes.left};break;case o.BR:T={bottom:this.block.bottom+this.block.sizeTypes.bottom,right:this.block.right+this.block.sizeTypes.right};break;default:T={top:this.block.top+this.block.sizeTypes.top,left:this.block.left+this.block.sizeTypes.left};break}this.block.isHidden&&(null!==(v=this.block.stickyTo)&&void 0!==v&&v.guid&&null!==(f=this.block.stickyTo)&&void 0!==f&&f.type&&(this.block.stickyTo.type===B.TOP?T.top="0px":this.block.stickyTo.type===B.LEFT&&(T.left="0px")));if(null!==(t=this.block.replication)&&void 0!==t&&t.topBlockGuid){var x,C,E=this.getStore().getRefByGuid(null===(x=this.block.replication)||void 0===x?void 0:x.topBlockGuid);if(E)T.top="calc(".concat(E.positionStyle.height," + ").concat(E.positionStyle.top," + ").concat(null===(C=this.block.replication)||void 0===C?void 0:C.verticalMargin,")")}if(null!==(i=this.block.stickyTo)&&void 0!==i&&i.guid&&null!==(e=this.block.stickyTo)&&void 0!==e&&e.type&&null!==(n=this.stickyToBlock)&&void 0!==n&&n.guid){var _=this.stickyToBlock,$=this.stickyToElement;if(_&&_.parentGuid===this.block.parentGuid&&$)switch(this.block.stickyTo.type){case B.TOP:T.top="calc(".concat($.positionStyle.height," + ").concat($.positionStyle.top," + ").concat(T.top,")");break;case B.LEFT:T.left="calc(".concat($.positionStyle.width," + ").concat($.positionStyle.left," + ").concat(T.left,")");break}}(this.block.widthCalc&&this.block.widthCalc.type&&this.block.widthCalc.value&&(S="calc(".concat(S," ").concat(this.block.widthCalc.type," ").concat(this.block.widthCalc.value,"px)")),this.block.heightCalc&&this.block.heightCalc.type&&this.block.heightCalc.value&&(m="calc(".concat(m," ").concat(this.block.heightCalc.type," ").concat(this.block.heightCalc.value,"px)")),this.block.isStretched)?T=Object.assign(T,{minWidth:S,minHeight:m,height:this.scrollHeight+"px",width:this.scrollWidth+"px"}):(null!==(k=this.block.minMax)&&void 0!==k&&k.minWidth&&this.block.sizeTypes.width===s.PERCENT&&(T=Object.assign(T,{minWidth:"".concat(this.block.minMax.minWidth,"px")})),null!==(g=this.block.minMax)&&void 0!==g&&g.maxWidth&&this.block.sizeTypes.width===s.PERCENT&&(T=Object.assign(T,{maxWidth:"".concat(this.block.minMax.maxWidth,"px")})),null!==(p=this.block.minMax)&&void 0!==p&&p.minHeight&&this.block.sizeTypes.height===s.PERCENT&&(T=Object.assign(T,{minHeight:"".concat(this.block.minMax.minHeight,"px")})),null!==(y=this.block.minMax)&&void 0!==y&&y.maxHeight&&this.block.sizeTypes.height===s.PERCENT&&(T=Object.assign(T,{maxHeight:"".concat(this.block.minMax.maxHeight,"px")})),T=Object.assign(T,{width:S,height:m}));if(this.block.isHidden&&(T.width="0px",T.height="0px"),(null===(c=this.block.stickyTo)||void 0===c||!c.guid)&&null!==(l=this.block.onCenter)&&void 0!==l&&l.horizontal&&this.isShowing){var G=this.getStore().getRefByGuid(this.block.guid);G&&G.$el.offsetWidth&&(this.block.sticky===o.BL||this.block.sticky===o.TL?T.left="calc(50% - calc(".concat(G.$el.offsetWidth,"px / 2))"):T.right="calc(50% - calc(".concat(G.$el.offsetWidth,"px / 2))"))}if((null===(a=this.block.stickyTo)||void 0===a||!a.guid)&&null!==(r=this.block.onCenter)&&void 0!==r&&r.horizontalAdaptive&&this.isShowing){var R=this.getStore().getRefByGuid(this.block.guid);R&&R.$el.offsetWidth&&(T.marginLeft="auto",T.marginLeft="auto",T.marginRight="auto",T.left="0",T.right="0")}if((null===(h=this.block.stickyTo)||void 0===h||!h.guid)&&null!==(d=this.block.onCenter)&&void 0!==d&&d.vertical&&this.isShowing){var P=this.getStore().getRefByGuid(this.block.guid);P&&(this.block.sticky===o.TR||this.block.sticky===o.TL?T.top="calc(50% - calc(".concat(P.$el.offsetHeight,"px / 2))"):T.bottom="calc(50% - calc(".concat(P.$el.offsetHeight,"px / 2))"))}return Object.assign(T,{zIndex:this.zIndex})},blockTabStyle:function(){var t="";return this.block.tabs&&(t+=this.block.tabs.tabStyle),t},blockContentStyle:function(){var t,i="",e=this.block;(e.style&&(i+=e.style),e.isHover)&&(null!==(t=e.interactive)&&void 0!==t&&t.containerHoverStyle&&(i+="; "+e.interactive.containerHoverStyle));return i},isShowChildren:function(){var t,i=!0,e=this.block;return"registry"===(null===(t=e.properties)||void 0===t?void 0:t.contentType)&&(i=!1),i},isActiveScrollHover:function(){var t;return!(null===(t=this.block)||void 0===t||!t.isScrollHover)}},watch:{activeTabGuid:function(t){var i=this;this.scrollHeight=0,this.scrollWidth=0,this.visitedTabGuids.includes(t)||this.visitedTabGuids.push(t),this.$nextTick((function(){i.setStretchedSize()}))},availableTabs:function(t){var i=this,e=t.some((function(t){return(null===t||void 0===t?void 0:t.guid)===i.activeTabGuid}));e||this.onTabClick(t[0].guid)}},mounted:function(){var t,i,e,o,s,n,c=this;if(this.setParent(),this.$nextTick((function(){var t,i;c.setStretchedSize(),c.setSticky(null===(t=c.block)||void 0===t||null===(i=t.stickyTo)||void 0===i?void 0:i.guid),c.isTabsContainer&&c.setIsShowArrows()})),null!==(t=this.block)&&void 0!==t&&null!==(i=t.tabs)&&void 0!==i&&i.use&&(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length)>0){this.block.tabs.saveActiveTab&&this.block.tabs.activeGuid?this.onTabClick(this.block.tabs.activeGuid||this.availableTabs[0].guid):this.onTabClick(this.availableTabs[0].guid);var l=this.getDefaultTab();l&&this.onTabClick(l)}if(null!==(n=this.block)&&void 0!==n&&n.isStretched&&this.$refs.container&&this.$refs.container instanceof Element){var a,r=this.$refs.container.children,h=new ot["a"]((function(){c.setStretchedSize()})),d=Object(F["a"])(r);try{for(d.s();!(a=d.n()).done;){var u=a.value;h.observe(u)}}catch(v){d.e(v)}finally{d.f()}var b=new MutationObserver((function(t){return t.filter((function(t){return"childList"===t.type})).forEach((function(t){h.observe(t.target)}))}));b.observe(this.$refs.container,{childList:!0,subtree:!0})}this.prepareReplication(),this.getStore().addRef(this.block.guid,this)},beforeDestroy:function(){this.getStore().removeRef(this.block.guid)},methods:{showChildTabs:function(t){if(this.block.tabs){var i=this.buidTreeTabs(this.visibleTabs);i[t].data.isExpanded=!i[t].data.isExpanded,i[t].childNodes.forEach((function t(i){var e;i.data.isShow=!i.data.isShow,(null===(e=i.childNodes)||void 0===e?void 0:e.length)>0&&i.data.isExpanded&&i.childNodes.forEach((function(i){return t(i)}))}))}},buidTreeTabs:function(t){var i,e=Object.create(null),o=Object(F["a"])(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;e[s.guid]=Object(et["a"])(Object(et["a"])({},s),{},{childNodes:[]})}}catch(a){o.e(a)}finally{o.f()}var n,c=Object(F["a"])(t);try{for(c.s();!(n=c.n()).done;){var l=n.value;e[l.data.parentTabForTree]&&e[l.data.parentTabForTree].childNodes.push(e[l.guid])}}catch(a){c.e(a)}finally{c.f()}return e},isShowTabs:function(t){return""===t.data.parentTabForTree||!!t.data.isShow},setSticky:function(t){t?(this.stickyToBlock=this.getStore().getByGuid(t),this.stickyToElement=this.getStore().getRefByGuid(t)):(this.stickyToBlock=void 0,this.stickyToElement=void 0)},setStretchedSize:function(){var t=this;this.scrollHeight=0,this.scrollWidth=0,this.$nextTick((function(){t.scrollHeight=t.$el.getElementsByClassName("content")[0].scrollHeight,t.scrollWidth=t.$el.getElementsByClassName("content")[0].scrollWidth}))},onReplicateBlock:function(t){this.replicationCallback&&this.replicationCallback(Object.assign({},t,{replicationBlockGuid:this.block.guid,replicationIndex:this.replicationIndex}))},prepareReplication:function(){var t=arguments,i=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var o,n,c,l,a,r,h,d,u,b,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=t.length>0&&void 0!==t[0]?t[0]:{},null!==(o=i.block.replication)&&void 0!==o&&o.function){e.next=3;break}return e.abrupt("return");case 3:return l=[],e.prev=4,e.next=7,null===(a=i.block.replication)||void 0===a?void 0:a.function(c);case 7:l=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.log("Error in replication request",e.t0);case 13:if(0!==l.length){e.next=16;break}return i.block.isHidden=!0,e.abrupt("return");case 16:i.block.isHidden=!1,l.shift(),r=i,h=r.block.guid,d=(null===(n=r.block.replication)||void 0===n?void 0:n.columns)||1,u={0:[r.block.guid]},b=0,i.replicationIndex=0,v=i.getStore().addListener(new st(i.onReplicateBlock)),l.forEach((function(t,e){var o=JSON.parse(JSON.stringify(r.block));if(o.replication=void 0,i.replicationIndex=i.replicationIndex+1,(e+1)%d!==0){var n,c,l,a,v,f;if(null!==(n=r.block.replication)&&void 0!==n&&null!==(c=n.horizontalMargin)&&void 0!==c&&c.value)o.left=null===(l=r.block.replication)||void 0===l||null===(a=l.horizontalMargin)||void 0===a?void 0:a.value,o.sizeTypes.left=(null===(v=r.block.replication)||void 0===v||null===(f=v.horizontalMargin)||void 0===f?void 0:f.type)||s.PIXEL;else o.left=0;if(o.stickyTo={type:"left",guid:h},b>0){var k,g,p,y,T,m,S=u[b-1][e%d+1];if(o.replication={},o.replication.topBlockGuid=S,null!==(k=r.block.replication)&&void 0!==k&&null!==(g=k.verticalMargin)&&void 0!==g&&g.value)o.replication.verticalMargin="".concat(null===(p=r.block.replication)||void 0===p||null===(y=p.verticalMargin)||void 0===y?void 0:y.value).concat((null===(T=r.block.replication)||void 0===T||null===(m=T.verticalMargin)||void 0===m?void 0:m.type)||s.PIXEL)}h=r.getStore().add(o)}else{var w,x,C,B,E,_;if(b++,null!==(w=r.block.replication)&&void 0!==w&&null!==(x=w.verticalMargin)&&void 0!==x&&x.value)o.top=null===(C=r.block.replication)||void 0===C||null===(B=C.verticalMargin)||void 0===B?void 0:B.value,o.sizeTypes.top=(null===(E=r.block.replication)||void 0===E||null===(_=E.verticalMargin)||void 0===_?void 0:_.type)||s.PIXEL;else o.top=0;o.stickyTo={type:"top",guid:h},h=r.getStore().add(o)}"undefined"===typeof u[b]&&(u[b]=[]),u[b].push(h)})),i.getStore().removeListener(v);case 27:case"end":return e.stop()}}),e,null,[[4,10]])})))()},setParent:function(){this.parentBlock=this.block.parentGuid?this.getStore().getByGuid(this.block.parentGuid):void 0,this.parentElement=this.block.parentGuid?this.$parent.$refs.draggableContainer:void 0},scrollPrevTab:function(){var t=this.$refs.tabsScroll,i=this.$refs.draggableContainer,e=i.offsetWidth;this.blockWidth=i.offsetWidth,this.tabsOffset-=e/2,this.tabsOffset<0&&(this.tabsOffset=0),t.style.transform="translateX(-".concat(this.tabsOffset,"px)")},scrollNextTab:function(){var t=this.$refs.tabsScroll,i=this.$refs.draggableContainer,e=t.offsetWidth,o=i.offsetWidth;this.blockWidth=i.offsetWidth,e-o<this.tabsOffset||(this.tabsOffset+=o/1.5,t.style.transform="translateX(-".concat(this.tabsOffset,"px)"))},setIsShowArrows:function(){if(this.$refs.draggableContainer){var t=this.$refs.tabsScroll,i=this.$refs.draggableContainer,e=t.offsetWidth;this.tabsWidth=t.offsetWidth;var o=i.offsetWidth;this.blockWidth=i.offsetWidth,e>o?this.isShowArrows=!0:(this.isShowArrows=!1,t.style.transform="translateX(-".concat(0,"px)"))}},getBlockTabStyle:function(t){var i=";";if(this.block.tabs&&t.guid===this.activeTabGuid){var e=this.block.tabs.activeTabStyle;e&&(i+="; "+this.block.tabs.activeTabStyle)}if(this.tabSettingsService){if(this.tabSettingsService.getIsStyled(t.guid)){var o=this.tabSettingsService.getStyle(t.guid);o&&(i+="; "+o)}this.tabSettingsService.getIsBlocked(t.guid)&&(i+="; color: gray; cursor: not-allowed; ")}return i},getDefaultTab:function(){var t,i,e,o,s;if(null===(t=this.block)||void 0===t||null===(i=t.tabs)||void 0===i||!i.use||1===(null===(e=this.block)||void 0===e||null===(o=e.tabs)||void 0===o||null===(s=o.list)||void 0===s?void 0:s.length))return null;for(var n=this.block.tabs.list,c=0;c<n.length;c++){var l=n[c];if(this.tabSettingsService){var a=this.tabSettingsService.getIsDefaultTab(l.guid);if(a)return l.guid}}return null},onTabClick:function(t){this.tabSettingsService&&this.tabSettingsService.getIsBlocked(t)||(this.$emit("tab-click",{guid:t}),this.activeTabGuid=t)}}}),lt=ct,at=(e("4a6a"),Object(j["a"])(lt,tt,it,!1,null,"645bc9ea",null)),rt=at.exports,ht=c["a"],dt=ht.extend({name:"VueDraggableResponsivePreviewer",components:{PreviewBlock:rt},provide:function(){return{getStore:this.getStore}},props:{replicationCallback:Function,tabSettings:{type:Object}},data:function(){return{store:new D([],!0),tabSettingsService:new Y(this.tabSettings,this)}},computed:{_blocks:function(){return this.store.get()}},watch:{tabSettings:{handler:function(){this.$set(this.tabSettingsService,"tabSettings",this.tabSettings)}}},methods:{getStore:function(){return this.store},setBlocks:function(t){var i=this;this.store.set([]),this.$nextTick((function(){i.store.set(t)}))},removeBlock:function(t){this.store.remove(t)},getRefByGuid:function(t){return this.store.getRefByGuid(t)}}}),ut=dt,bt=(e("0da9"),Object(j["a"])(ut,Q,Z,!1,null,"15577791",null)),vt=bt.exports,ft={name:"App",components:{VueDraggableResponsivePreviewer:vt,VueDraggableResponsive:U},data:function(){return{activeBlock:void 0,preview:!1,blocks:[],showHidden:!1}},watch:{preview:function(t){var i=this;t&&(this.blocks=this.$refs.designer.getBlocks(),this.$nextTick((function(){i.$refs.previewer.setBlocks(i.blocks)})))}},methods:{addVerticalCenter:function(){this.$refs.designer.addBlock({width:70,height:10,top:30,right:0,sticky:"tl",onCenter:{vertical:!0},sizeTypes:{width:"%",height:"%",top:"px",left:"%"}})},addHorizontalCenter:function(){this.$refs.designer.addBlock({width:70,height:10,top:30,right:0,sticky:"tl",onCenter:{horizontal:!0},sizeTypes:{width:"%",height:"%",top:"px",left:"%"}})},addMinMax:function(){this.$refs.designer.addBlock({width:100,height:10,top:30,right:0,sticky:"tl",minMax:{maxWidth:200},onCenter:{horizontal:!0},sizeTypes:{width:"%",height:"%",top:"px",left:"%"}})},cl:function(t){console.log(t)},switchSticky:function(){var t=this;if(this.activeBlock){var i;if(null!==(i=this.activeBlock.stickyTo)&&void 0!==i&&i.guid)return this.activeBlock.stickyTo.guid=void 0,!1;var e=this.$refs.designer.getBlocks().filter((function(i){return i.guid!==t.activeBlock.guid}))[0];this.activeBlock.stickyTo={guid:e.guid,type:B.TOP}}},toggleHide:function(){this.activeBlock&&(this.activeBlock.isHidden=!this.activeBlock.isHidden)},addReplication:function(t,i){var e;this.$refs.designer.addBlock({width:70,height:10,top:30,right:0,sticky:"tl",type:t,sizeTypes:{width:"px",height:"px",top:"px",left:"px"},event:i,parentGuid:null===(e=this.activeBlock)||void 0===e?void 0:e.guid,className:"red",replication:{columns:1,function:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var i,e,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=7,e=0,o=[];while(i>e)o.push({id:e+1}),e++;return t.next=6,new Promise((function(t){return setTimeout(t,1e3)}));case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));function i(){return t.apply(this,arguments)}return i}(),verticalMargin:{type:"px",value:20},horizontalMargin:{type:"px",value:20}}})},clearActive:function(){this.$refs.designer.clearActiveBlock(),this.activeBlock=void 0},oncontext:function(t){console.log(t)},removeTab:function(){var t;this.activeBlock&&(null!==(t=this.activeBlock.tabs)&&void 0!==t&&t.use&&this.activeBlock.tabs.list.splice(0,1))},addTab:function(){var t;this.activeBlock&&(this.activeBlock.tabs||this.$set(this.activeBlock,"tabs",{use:!1,list:[],position:n.TOP}),this.activeBlock.tabs.use=!0,null!==(t=this.activeBlock.tabs)&&void 0!==t&&t.use&&this.activeBlock.tabs.list.push({name:"Новая вкладка - ".concat(this.activeBlock.tabs.list.length),guid:Date.now()}))},switchWidth:function(){if(!this.activeBlock)return!1;this.activeBlock.sizeTypes.bottom=this.activeBlock.sizeTypes.bottom===s.PERCENT?s.PIXEL:s.PERCENT},addWithTabs:function(t,i){this.$refs.designer.addBlock({width:70,height:10,top:30,right:0,sticky:"tl",type:t,event:i,isStretched:!0,tabs:{class:"test",use:!0,containerStyle:"background: grey",tabStyle:"color:black",tabArrowsClass:"testArr",activeTabStyle:"color:green",requiredTabs:["asdasdas"],list:[{guid:"asdasdas",name:"test"},{guid:"asdasdas2",name:"test2"}],position:"top"}})},load:function(){this.activeBlock=void 0,this.$refs.designer.setBlocks([{isStretched:!0,isActive:!0,isActiveAsParent:!1,tabs:{class:"test",use:!0,containerStyle:"background: grey",tabStyle:"color:black",tabArrowsClass:"testArr",activeTabStyle:"color:green",list:[{guid:"asdasdas",name:"test"},{guid:"asdasdas2",name:"test2"}],position:"top",activeGuid:"asdasdas"},isHover:!1,isHidden:!1,top:22,right:82,bottom:91,left:9,sticky:"tl",sizeTypes:{width:"%",height:"%",top:"%",right:"%",bottom:"%",left:"%"},children:[{isStretched:!1,isActive:!1,isActiveAsParent:!1,isHover:!1,isHidden:!1,top:81.109375,right:78,bottom:488,left:10,sticky:"tl",sizeTypes:{width:"%",height:"px",top:"px",left:"%",right:"%",bottom:"%"},onCenter:{horizontal:!0,vertical:!0},children:[],width:70,height:100,guid:"3bb941e8-996e-45f6-afce-1bfcc95e4bcd",parentGuid:"f5cd4eaf-0005-482a-87aa-b34aa1e0ab1b",parentTabGuid:"asdasdas",isEditing:!1},{isStretched:!1,isActive:!1,isActiveAsParent:!1,isHover:!1,isHidden:!1,top:62.109375,right:76,bottom:490,left:14,sticky:"tl",sizeTypes:{width:"%",height:"px",top:"px",left:"%",right:"%",bottom:"%"},children:[],width:70,height:100,guid:"3e22f8e6-a83c-4387-bdd3-441611917bc9",parentGuid:"f5cd4eaf-0005-482a-87aa-b34aa1e0ab1b",parentTabGuid:"asdasdas2",isEditing:!1}],width:84,height:55,guid:"f5cd4eaf-0005-482a-87aa-b34aa1e0ab1b",isEditing:!1},{top:9,guid:"528bc98d-e443-4830-add6-596e22b981b1",left:21,right:48,width:10,bottom:60,height:10,sticky:"tl",heightCalc:{type:"-",value:200},children:[],sizeTypes:{top:"%",left:"%",right:"%",width:"%",bottom:"%",height:"%"}},{top:16,guid:"a7a8f391-0973-4d6b-a9d9-ab9bca5f9de6",left:62,right:39,style:"background:red",width:10,bottom:65,height:10,sticky:"tl",children:[],sizeTypes:{top:"%",left:"%",right:"%",width:"%",bottom:"%",height:"%"}}])},remove:function(){this.activeBlock&&(this.$refs.designer.removeBlock(this.activeBlock.guid),this.activeBlock=void 0)},get:function(){console.log(this.$refs.designer.getBlocks())},onStartDrag:function(t){this.activeBlock=t,this.$refs.designer.setActiveBlock(t.guid)},addSticky:function(t){this.activeBlock&&this.$refs.designer.addBlock({width:40,height:100,top:10,left:20,sticky:"tl",parentGuid:this.activeBlock.parentGuid,sizeTypes:{width:"%",height:"px",top:"px",left:"%"},stickyTo:{guid:this.activeBlock.guid,type:B.TOP},event:t,type:1})},addContainer:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$refs.designer.addBlock({width:70,height:100,top:30,right:0,className:"green",sticky:"tl",sizeTypes:{width:"%",height:"px",top:"px",left:"%"},type:t,event:i,isStretched:e})},addContainerPixel:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$refs.designer.addBlock({width:70,height:100,top:30,right:0,sticky:"tl",sizeTypes:{width:"px",height:"px",top:"px",left:"px",right:"px",bottom:"px"},type:t,event:i,isStretched:e})},addContainerPercent:function(t,i){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.$refs.designer.addBlock({width:70,height:100,top:30,right:0,sticky:"tl",sizeTypes:{width:"%",height:"%",top:"%",left:"%"},type:t,event:i,isStretched:e})},addChildren:function(t){this.$refs.designer.addBlock({width:70,height:100,sizeTypes:{width:"%",height:"px",top:"px",left:"%"},top:30,left:20,parentGuid:this.activeBlock.guid,type:1,event:t})}}},kt=ft,gt=(e("034f"),Object(j["a"])(kt,l,a,!1,null,null,null)),pt=gt.exports;c["a"].config.productionTip=!1,new c["a"]({render:function(t){return t(pt)}}).$mount("#app")},d993:function(t,i,e){}});
//# sourceMappingURL=app.290e401c.js.map